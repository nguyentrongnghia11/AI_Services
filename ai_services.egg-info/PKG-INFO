Metadata-Version: 2.4
Name: ai-services
Version: 0.1.0
Summary: AI Services for Social Website - Async workers with RabbitMQ and MongoDB
Requires-Python: >=3.10
Description-Content-Type: text/markdown
Requires-Dist: fastapi==0.109.0
Requires-Dist: uvicorn==0.23.0
Requires-Dist: aio-pika==9.4.0
Requires-Dist: transformers==4.36.0
Requires-Dist: torch>=2.5.0
Requires-Dist: sentencepiece==0.1.99
Requires-Dist: sentence-transformers==2.2.2
Requires-Dist: motor==3.3.2
Requires-Dist: python-dotenv==1.0.0
Provides-Extra: dev
Requires-Dist: pytest>=7.4.0; extra == "dev"
Requires-Dist: pytest-asyncio>=0.21.0; extra == "dev"
Requires-Dist: black>=23.0.0; extra == "dev"
Requires-Dist: ruff>=0.1.0; extra == "dev"

# AI Services - Social Website

Async AI worker services for processing posts, detecting toxic content, and generating embeddings using RabbitMQ and MongoDB.

## âš¡ Quick Start

### Automated Setup (Recommended)
```powershell
# Run the setup script
.\setup.ps1
```

### Manual Setup
```powershell
# Install UV (10-100x faster than pip)
pip install uv

# Create environment and install dependencies
uv venv
.\.venv\Scripts\Activate.ps1
uv pip install -e .

# Start the server
uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
```

## ğŸ“‹ Features

âœ… **Async/Await Architecture** - High-performance non-blocking I/O  
âœ… **Three AI Workers**:
  - **Toxic Detector** - Content moderation using ViHateT5
  - **Hint Post** - Similar post recommendations
  - **Encode Post** - Generate embeddings for posts

âœ… **Modern Stack**:
  - FastAPI for REST API
  - Motor for async MongoDB
  - aio-pika for async RabbitMQ
  - Transformers for ML models

## ğŸ“š Documentation

- **[QUICKSTART.md](QUICKSTART.md)** - Complete setup guide
- **[UV_SETUP.md](UV_SETUP.md)** - UV package manager guide
- **[ASYNC_MIGRATION.md](ASYNC_MIGRATION.md)** - Technical architecture details
- **[COMMANDS.md](COMMANDS.md)** - Command reference

## ğŸš€ Usage

### Start Server
```powershell
uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
```

### Check Health
```powershell
curl http://localhost:8000/health
```

### Test Connections
```powershell
python test_async_setup.py
```

## ğŸ”§ Requirements

- Python 3.10+
- RabbitMQ (localhost:5672)
- MongoDB (localhost:27017)

## ğŸ“¦ Dependencies

Main dependencies (installed automatically):
- `fastapi` - Web framework
- `uvicorn` - ASGI server
- `aio-pika` - Async RabbitMQ client
- `motor` - Async MongoDB driver
- `transformers` - ML models
- `sentence-transformers` - Embeddings
- `torch` - PyTorch

## ğŸ¯ API Endpoints

- `GET /` - API status
- `GET /health` - Worker health check
- `GET /docs` - Interactive API documentation
- `GET /redoc` - ReDoc documentation

## ğŸ”¥ Why UV?

UV is 10-100x faster than pip:
- Fresh install: ~5 seconds vs ~2 minutes
- Cached install: ~1 second vs ~30 seconds
- Better dependency resolution
- Drop-in replacement for pip

## ğŸ—ï¸ Project Structure

```
ai_services/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ main.py                 # FastAPI application & worker orchestration
â”‚   â”œâ”€â”€ consumer.py             # Async worker definitions
â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â”œâ”€â”€ connectMongodb.py   # Motor async MongoDB connection
â”‚   â”‚   â””â”€â”€ connectRabbitmq.py  # aio-pika async RabbitMQ connection
â”‚   â”œâ”€â”€ services/               # Business logic
â”‚   â””â”€â”€ utils/                  # Utilities & model loaders
â”œâ”€â”€ pyproject.toml              # Project config & dependencies
â”œâ”€â”€ requirements.txt            # Legacy pip support (backup)
â”œâ”€â”€ test_async_setup.py         # Connection verification
â”œâ”€â”€ setup.ps1                   # Automated setup script
â””â”€â”€ .env                        # Environment variables
```

## âš™ï¸ Configuration

Create a `.env` file:
```env
# MongoDB
MONGO_URI=mongodb://localhost:27017/MUSIC_APP
DATABASE_NAME=MUSIC_APP

# RabbitMQ
RABBITMQ_HOST=localhost
RABBITMQ_PORT=5672
```

## ğŸ§ª Testing

```powershell
# Test connections
python test_async_setup.py

# Run with pytest (if installed)
pytest tests/
```

## ğŸ“Š Performance

With async architecture:
- **2-3x higher throughput** vs sync version
- **Lower latency** under load
- **Better resource usage** (less memory, fewer threads)
- **Auto-reconnection** for robust connections

## ğŸ› Troubleshooting

### UV not found
```powershell
pip install uv
```

### Can't activate venv
```powershell
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope Process
.\.venv\Scripts\Activate.ps1
```

### Connection errors
1. Check RabbitMQ is running: `rabbitmq-server`
2. Check MongoDB is running: `mongod`
3. Verify `.env` configuration

### Port already in use
```powershell
# Find process on port 8000
netstat -ano | findstr :8000

# Kill process (replace <PID>)
taskkill /PID <PID> /F
```

## ğŸ¤ Contributing

1. Fork the repository
2. Create your feature branch
3. Commit your changes
4. Push to the branch
5. Create a Pull Request

## ğŸ“ License

MIT

## ğŸ‘¥ Authors

nguyentrongnghia11

## ğŸ™ Acknowledgments

- FastAPI for the excellent web framework
- Hugging Face for ML models
- aio-pika and motor for async I/O
- UV for blazingly fast package management
